{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./admin/assets/js/collections/tracks.js","webpack:///./admin/assets/js/models/track.js","webpack:///./admin/assets/js/modules/application.js","webpack:///./admin/assets/js/modules/workflows.js","webpack:///./admin/assets/js/playlist-edit.js","webpack:///./admin/assets/js/views/edit-playlist/track-list.js","webpack:///./admin/assets/js/views/edit-playlist/track/artwork.js","webpack:///./admin/assets/js/views/edit-playlist/track/audio.js","webpack:///./admin/assets/js/views/edit-playlist/track/index.js","webpack:///./admin/assets/js/views/frame/track-media.js","webpack:///./admin/assets/js/views/screen/button/add-tracks.js","webpack:///./admin/assets/js/views/screen/edit-playlist.js","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///(webpack)/buildin/global.js","webpack:///external \"Backbone\"","webpack:///external \"jQuery\"","webpack:///external \"mejs\"","webpack:///external \"_\"","webpack:///external \"wp\""],"names":["Tracks","Backbone","Collection","extend","model","Track","comparator","track","parseInt","get","fetch","wp","ajax","post","post_id","settings","postId","done","tracks","reset","save","data","sort","Object","assign","toJSON","nonce","saveNonce","Model","defaults","artist","artworkId","artworkUrl","audioId","audioUrl","format","length","title","order","Application","l10n","global","cue","Attachment","media","frames","setModel","id","method","frame","call","_addTracks","TrackMediaFrame","workflows","addTracks","frameTitle","library","type","button","text","frameButtonText","multiple","uploader","options","plupload","filters","mime_types","fileTypes","extensions","state","props","off","debouncedScan","on","selection","_","each","models","attachment","push","embed","url","_selectArtwork","workflow","selectArtwork","files","attachments","first","set","sizes","_selectAudio","selectAudio","isEmbed","setState","keys","attributes","without","key","value","destroy","_cueSettings","config","view","defaultProps","collection","controller","$","screen","EditPlaylistScreen","el","render","TrackList","View","className","tagName","initialize","listenTo","addTrack","updateOrder","$el","empty","sortable","axis","delay","forceHelperSize","forcePlaceholderSize","opacity","start","e","ui","placeholder","css","update","trackView","append","find","item","i","cid","TrackArtwork","template","events","parent","html","toggleClass","isEmpty","select","open","TrackAudio","refresh","cleanup","playerId","attr","mejs","players","remove","$mediaEl","wrap","playerSettings","classPrefix","defaultAudioHeight","features","pluginPath","stretching","success","mediaElement","domObject","t","$fakeBody","container","nodeName","replaceWith","childNodes","error","$parent","closest","split","pop","pluginVars","mediaelementplayer","player","pause","setSrc","updateTitle","updateFields","views","add","minimize","preventDefault","removeClass","blur","toggleOpenStatus","hasClass","window","trigger","updateAttribute","attribute","target","$settings","filter","val","MediaFrame","Toolbar","PostFrame","Post","SelectFrame","Select","createStates","states","Library","priority","toolbar","filterable","query","editable","allowLocalEdits","displaySettings","displayUserSettings","Embed","addFromUrl","menuItem","bindHandlers","prototype","apply","arguments","createToolbar","mainEmbedToolbar","mainMenu","embedContent","editSelectionContent","mainInsertToolbar","selectionStatusToolbar","style","requires","click","close","AddTracksButton","$button","addClass","saved","buttonClick"],"mappings":"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","file":"playlist-edit.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./admin/assets/js/playlist-edit.js\");\n","import Backbone from 'backbone';\nimport wp from 'wp';\n\nimport { settings } from 'cue';\nimport { Track } from '../models/track';\n\nexport const Tracks = Backbone.Collection.extend({\n\tmodel: Track,\n\n\tcomparator: function( track ) {\n\t\treturn parseInt( track.get( 'order' ), 10 );\n\t},\n\n\tfetch: function() {\n\t\treturn wp.ajax.post( 'cue_get_playlist_tracks', {\n\t\t\tpost_id: settings.postId\n\t\t}).done( tracks => this.reset( tracks ) );\n\t},\n\n\tsave: function( data ) {\n\t\tthis.sort();\n\n\t\tdata = Object.assign({}, data, {\n\t\t\tpost_id: settings.postId,\n\t\t\ttracks: this.toJSON(),\n\t\t\tnonce: settings.saveNonce\n\t\t});\n\n\t\treturn wp.ajax.post( 'cue_save_playlist_tracks', data );\n\t}\n});\n","import Backbone from 'backbone';\n\nexport const Track = Backbone.Model.extend({\n\tdefaults: {\n\t\tartist: '',\n\t\tartworkId: '',\n\t\tartworkUrl: '',\n\t\taudioId: '',\n\t\taudioUrl: '',\n\t\tformat: '',\n\t\tlength: '',\n\t\ttitle: '',\n\t\torder: 0\n\t}\n});\n","class Application {\n\tconstructor() {\n\t\tthis.l10n = {};\n\t\tthis.settings = {};\n\t}\n\n\tconfig( settings ) {\n\t\tif ( settings.l10n ) {\n\t\t\tthis.l10n = Object.assign( this.l10n, settings.l10n );\n\t\t\tdelete settings.l10n;\n\t\t}\n\n\t\tthis.settings = Object.assign( this.settings, settings );\n\t}\n}\n\nglobal.cue = global.cue || new Application();\n\nexport default global.cue;\nexport const l10n = global.cue.l10n;\nexport const settings = global.cue.settings;\n","import _ from 'underscore';\nimport wp from 'wp';\n\nimport cue from 'cue';\nimport { TrackMediaFrame } from '../views/frame/track-media';\n\nconst { Attachment } = wp.media.model;\nconst { l10n } = cue;\n\nexport default {\n\tframes: [],\n\tmodel: {},\n\n\t/**\n\t * Set a model for the current workflow.\n\t *\n\t * @param {Object} frame\n\t */\n\tsetModel: function( model ) {\n\t\tthis.model = model;\n\t\treturn this;\n\t},\n\n\t/**\n\t * Retrieve or create a frame instance for a particular workflow.\n\t *\n\t * @param {string} id Frame identifer.\n\t */\n\tget: function( id )  {\n\t\tconst method = '_' + id;\n\t\tlet frame = this.frames[ method ] || null;\n\n\t\t// Always call the frame method to perform any routine set up. The\n\t\t// frame method should short-circuit before being initialized again.\n\t\tframe = this[ method ].call( this, frame );\n\n\t\t// Store the frame for future use.\n\t\tthis.frames[ method ] = frame;\n\n\t\treturn frame;\n\t},\n\n\t/**\n\t * Workflow for adding tracks to the playlist.\n\t *\n\t * @param {Object} frame\n\t */\n\t_addTracks: function( frame ) {\n\t\tif ( frame ) {\n\t\t\treturn frame; // Return the existing frame for this workflow.\n\t\t}\n\n\t\t// Initialize the audio frame.\n\t\tframe = new TrackMediaFrame({\n\t\t\ttitle: l10n.workflows.addTracks.frameTitle,\n\t\t\tlibrary: {\n\t\t\t\ttype: 'audio'\n\t\t\t},\n\t\t\tbutton: {\n\t\t\t\ttext: l10n.workflows.addTracks.frameButtonText\n\t\t\t},\n\t\t\tmultiple: 'add'\n\t\t});\n\n\t\t// Set the extensions that can be uploaded.\n\t\tframe.uploader.options.uploader.plupload = {\n\t\t\tfilters: {\n\t\t\t\tmime_types: [ {\n\t\t\t\t\ttitle: l10n.workflows.addTracks.fileTypes,\n\t\t\t\t\textensions: 'm4a,mp3,ogg,wma'\n\t\t\t\t} ]\n\t\t\t}\n\t\t};\n\n\t\t// Prevent the Embed controller scanner from changing the state.\n\t\tframe.state( 'embed' ).props.off( 'change:url', frame.state( 'embed' ).debouncedScan );\n\n\t\t// Insert each selected attachment as a new track model.\n\t\tframe.state( 'insert' ).on( 'insert', function( selection ) {\n\t\t\t_.each( selection.models, function( attachment ) {\n\t\t\t\tcue.tracks.push( attachment.toJSON().cue );\n\t\t\t});\n\t\t});\n\n\t\t// Insert the embed data as a new model.\n\t\tframe.state( 'embed' ).on( 'select', function() {\n\t\t\tconst embed = this.props.toJSON();\n\n\t\t\tconst track = {\n\t\t\t\taudioId: '',\n\t\t\t\taudioUrl: embed.url\n\t\t\t};\n\n\t\t\tif ( ( 'title' in embed ) && '' !== embed.title ) {\n\t\t\t\ttrack.title = embed.title;\n\t\t\t}\n\n\t\t\tcue.tracks.push( track );\n\t\t});\n\n\t\treturn frame;\n\t},\n\n\t/**\n\t * Workflow for selecting track artwork image.\n\t *\n\t * @param {Object} frame\n\t */\n\t_selectArtwork: function( frame ) {\n\t\tconst workflow = this;\n\n\t\t// Return existing frame for this workflow.\n\t\tif ( frame ) {\n\t\t\treturn frame;\n\t\t}\n\n\t\t// Initialize the artwork frame.\n\t\tframe = wp.media({\n\t\t\ttitle: l10n.workflows.selectArtwork.frameTitle,\n\t\t\tlibrary: {\n\t\t\t\ttype: 'image'\n\t\t\t},\n\t\t\tbutton: {\n\t\t\t\ttext: l10n.workflows.selectArtwork.frameButtonText\n\t\t\t},\n\t\t\tmultiple: false\n\t\t});\n\n\t\t// Set the extensions that can be uploaded.\n\t\tframe.uploader.options.uploader.plupload = {\n\t\t\tfilters: {\n\t\t\t\tmime_types: [ {\n\t\t\t\t\tfiles: l10n.workflows.selectArtwork.fileTypes,\n\t\t\t\t\textensions: 'jpg,jpeg,gif,png'\n\t\t\t\t} ]\n\t\t\t}\n\t\t};\n\n\t\t// Automatically select the existing artwork if possible.\n\t\tframe.on( 'open', function() {\n\t\t\tconst selection = this.get( 'library' ).get( 'selection' );\n\t\t\tconst artworkId = workflow.model.get( 'artworkId' );\n\t\t\tconst attachments = [];\n\n\t\t\tif ( artworkId ) {\n\t\t\t\tattachments.push( Attachment.get( artworkId ) );\n\t\t\t\tattachments[0].fetch();\n\t\t\t}\n\n\t\t\tselection.reset( attachments );\n\t\t});\n\n\t\t// Set the model's artwork ID and url properties.\n\t\tframe.state( 'library' ).on( 'select', function() {\n\t\t\tconst attachment = this.get( 'selection' ).first().toJSON();\n\n\t\t\tworkflow.model.set({\n\t\t\t\tartworkId: attachment.id,\n\t\t\t\tartworkUrl: attachment.sizes.cue.url\n\t\t\t});\n\t\t});\n\n\t\treturn frame;\n\t},\n\n\t/**\n\t * Workflow for selecting track audio.\n\t *\n\t * @param {Object} frame\n\t */\n\t_selectAudio: function( frame ) {\n\t\tconst workflow = this;\n\n\t\t// Return the existing frame for this workflow.\n\t\tif ( frame ) {\n\t\t\treturn frame;\n\t\t}\n\n\t\t// Initialize the audio frame.\n\t\tframe = new TrackMediaFrame({\n\t\t\ttitle: l10n.workflows.selectAudio.frameTitle,\n\t\t\tlibrary: {\n\t\t\t\ttype: 'audio'\n\t\t\t},\n\t\t\tbutton: {\n\t\t\t\ttext: l10n.workflows.selectAudio.frameButtonText\n\t\t\t},\n\t\t\tmultiple: false\n\t\t});\n\n\t\t// Set the extensions that can be uploaded.\n\t\tframe.uploader.options.uploader.plupload = {\n\t\t\tfilters: {\n\t\t\t\tmime_types: [ {\n\t\t\t\t\ttitle: l10n.workflows.selectAudio.fileTypes,\n\t\t\t\t\textensions: 'm4a,mp3,ogg,wma'\n\t\t\t\t} ]\n\t\t\t}\n\t\t};\n\n\t\t// Prevent the Embed controller scanner from changing the state.\n\t\tframe.state( 'embed' ).props.off( 'change:url', frame.state( 'embed' ).debouncedScan );\n\n\t\t// Set the frame state when opening it.\n\t\tframe.on( 'open', function() {\n\t\t\tconst selection = this.get( 'insert' ).get( 'selection' );\n\t\t\tconst audioId = workflow.model.get( 'audioId' );\n\t\t\tconst audioUrl = workflow.model.get( 'audioUrl' );\n\t\t\tconst isEmbed = audioUrl && ! audioId;\n\t\t\tconst attachments = [];\n\n\t\t\t// Automatically select the existing audio file if possible.\n\t\t\tif ( audioId ) {\n\t\t\t\tattachments.push( Attachment.get( audioId ) );\n\t\t\t\tattachments[0].fetch();\n\t\t\t}\n\n\t\t\tselection.reset( attachments );\n\n\t\t\t// Set the embed state properties.\n\t\t\tif ( isEmbed ) {\n\t\t\t\tthis.get( 'embed' ).props.set({\n\t\t\t\t\turl: audioUrl,\n\t\t\t\t\ttitle: workflow.model.get( 'title' )\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.get( 'embed' ).props.set({\n\t\t\t\t\turl: '',\n\t\t\t\t\ttitle: ''\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Set the state to 'embed' if the model has an audio URL but\n\t\t\t// not a corresponding attachment ID.\n\t\t\tframe.setState( isEmbed ? 'embed' : 'insert' );\n\t\t});\n\n\t\t// Copy data from the selected attachment to the current model.\n\t\tframe.state( 'insert' ).on( 'insert', function( selection ) {\n\t\t\tconst attachment = selection.first().toJSON().cue;\n\t\t\tconst data = {};\n\t\t\tconst keys = _.keys( workflow.model.attributes );\n\n\t\t\t// Attributes that shouldn't be updated when inserting an\n\t\t\t// audio attachment.\n\t\t\t_.without( keys, [ 'id', 'order' ] );\n\n\t\t\t// Update these attributes if they're empty.\n\t\t\t// They shouldn't overwrite any data entered by the user.\n\t\t\t_.each( keys, function( key ) {\n\t\t\t\tconst value = workflow.model.get( key );\n\n\t\t\t\tif ( ! value && ( key in attachment ) && value !== attachment[ key ] ) {\n\t\t\t\t\tdata[ key ] = attachment[ key ];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Attributes that should always be replaced.\n\t\t\tdata.audioId  = attachment.audioId;\n\t\t\tdata.audioUrl = attachment.audioUrl;\n\n\t\t\tworkflow.model.set( data );\n\t\t});\n\n\t\t// Copy the embed data to the current model.\n\t\tframe.state( 'embed' ).on( 'select', function() {\n\t\t\tconst embed = this.props.toJSON();\n\t\t\tconst data = {};\n\n\t\t\tdata.audioId  = '';\n\t\t\tdata.audioUrl = embed.url;\n\n\t\t\tif ( ( 'title' in embed ) && '' !== embed.title ) {\n\t\t\t\tdata.title = embed.title;\n\t\t\t}\n\n\t\t\tworkflow.model.set( data );\n\t\t});\n\n\t\t// Remove an empty model if the frame is escaped.\n\t\tframe.on( 'escape', function() {\n\t\t\tconst model = workflow.model.toJSON();\n\n\t\t\tif ( ! model.artworkUrl && ! model.audioUrl ) {\n\t\t\t\tworkflow.model.destroy();\n\t\t\t}\n\t\t});\n\n\t\treturn frame;\n\t}\n};\n","/* global _cueSettings */\n\nimport $ from 'jquery';\nimport wp from 'wp';\n\nimport cue from 'cue';\nimport { EditPlaylistScreen } from './views/screen/edit-playlist';\nimport { Track } from './models/track';\nimport { Tracks } from './collections/tracks';\nimport workflows from './modules/workflows';\n\ncue.data = _cueSettings; // Back-compat.\ncue.config( _cueSettings );\n\nwp.media.view.settings.post.id = cue.data.postId;\nwp.media.view.settings.defaultProps = {};\n\nObject.assign( cue, { collection: {}, controller: {}, model: {}, view: {} });\ncue.model.Track = Track;\ncue.model.Tracks = Tracks;\ncue.workflows = workflows;\n\n/**\n * ========================================================================\n * SETUP\n * ========================================================================\n */\n\n$(function( $ ) {\n\tconst tracks = new cue.model.Tracks( cue.data.tracks );\n\tcue.tracks = tracks;\n\tdelete cue.data.tracks;\n\n\tconst screen = new EditPlaylistScreen({\n\t\tel: '#post',\n\t\tcollection: tracks,\n\t\tl10n: cue.l10n\n\t});\n\n\tscreen.render();\n});\n","import $ from 'jquery';\nimport _ from 'underscore';\nimport wp from 'wp';\n\nimport { Track } from './track';\n\nexport const TrackList = wp.Backbone.View.extend({\n\tclassName: 'cue-tracklist',\n\ttagName: 'ol',\n\n\tinitialize: function() {\n\t\tthis.listenTo( this.collection, 'add', this.addTrack );\n\t\tthis.listenTo( this.collection, 'add remove', this.updateOrder );\n\t\tthis.listenTo( this.collection, 'reset', this.render );\n\t},\n\n\trender: function() {\n\t\tthis.$el.empty();\n\n\t\tthis.collection.each( this.addTrack, this );\n\t\tthis.updateOrder();\n\n\t\tthis.$el.sortable({\n\t\t\taxis: 'y',\n\t\t\tdelay: 150,\n\t\t\tforceHelperSize: true,\n\t\t\tforcePlaceholderSize: true,\n\t\t\topacity: 0.6,\n\t\t\tstart: ( e, ui ) => {\n\t\t\t\tui.placeholder.css( 'visibility', 'visible' );\n\t\t\t},\n\t\t\tupdate: ( e, ui ) => {\n\t\t\t\tthis.updateOrder();\n\t\t\t}\n\t\t});\n\n\t\treturn this;\n\t},\n\n\taddTrack: function( track ) {\n\t\tconst trackView = new Track({ model: track });\n\t\tthis.$el.append( trackView.render().el );\n\t},\n\n\tupdateOrder: function() {\n\t\t_.each( this.$el.find( '.cue-track' ), ( item, i ) => {\n\t\t\tconst cid = $( item ).data( 'cid' );\n\t\t\tthis.collection.get( cid ).set( 'order', i );\n\t\t});\n\t}\n});\n","import _ from 'underscore';\nimport wp from 'wp';\n\nimport workflows from '../../../modules/workflows';\n\nexport const TrackArtwork = wp.Backbone.View.extend({\n\ttagName: 'span',\n\tclassName: 'cue-track-artwork',\n\ttemplate: wp.template( 'cue-playlist-track-artwork' ),\n\n\tevents: {\n\t\t'click': 'select'\n\t},\n\n\tinitialize: function( options ) {\n\t\tthis.parent = options.parent;\n\t\tthis.listenTo( this.model, 'change:artworkUrl', this.render );\n\t},\n\n\trender: function() {\n\t\tthis.$el.html( this.template( this.model.toJSON() ) );\n\t\tthis.parent.$el.toggleClass( 'has-artwork', ! _.isEmpty( this.model.get( 'artworkUrl' ) ) );\n\t\treturn this;\n\t},\n\n\tselect: function() {\n\t\tworkflows.setModel( this.model ).get( 'selectArtwork' ).open();\n\t}\n});\n","import $ from 'jquery';\nimport mejs from 'mediaelementjs';\nimport wp from 'wp';\n\nimport { settings } from 'cue';\nimport workflows from '../../../modules/workflows';\n\nexport const TrackAudio = wp.Backbone.View.extend({\n\ttagName: 'span',\n\tclassName: 'cue-track-audio',\n\ttemplate: wp.template( 'cue-playlist-track-audio' ),\n\n\tevents: {\n\t\t'click .cue-track-audio-selector': 'select'\n\t},\n\n\tinitialize: function( options ) {\n\t\tthis.parent = options.parent;\n\n\t\tthis.listenTo( this.model, 'change:audioUrl', this.refresh );\n\t\tthis.listenTo( this.model, 'destroy', this.cleanup );\n\t},\n\n\trender: function() {\n\t\tconst track = this.model.toJSON();\n\t\tconst playerId = this.$el.find( '.mejs-audio' ).attr( 'id' );\n\n\t\t// Remove the MediaElement player object if the\n\t\t// audio file URL is empty.\n\t\tif ( '' === track.audioUrl && playerId ) {\n\t\t\tmejs.players[ playerId ].remove();\n\t\t}\n\n\t\t// Render the media element.\n\t\tthis.$el.html( this.template( this.model.toJSON() ) );\n\n\t\t// Set up MediaElement.js.\n\t\tconst $mediaEl = this.$el.find( '.cue-audio' );\n\n\t\tif ( $mediaEl.length ) {\n\n\t\t\t// MediaElement traverses the DOM and throws an error if it\n\t\t\t// can't find a parent node before reaching <body>. It makes\n\t\t\t// sure the flash fallback won't exist within a <p> tag.\n\n\t\t\t// The view isn't attached to the DOM at this point, so an\n\t\t\t// error is thrown when reaching the top of the tree.\n\n\t\t\t// This hack makes it stop searching. The fake <body> tag is\n\t\t\t// removed in the success callback.\n\t\t\t// @see mediaelement-and-player.js:~1222\n\t\t\t$mediaEl.wrap( '<body></body>' );\n\n\t\t\tconst playerSettings = {\n\t\t\t\tclassPrefix: 'mejs-',\n\t\t\t\tdefaultAudioHeight: 30,\n\t\t\t\tfeatures: [ 'playpause', 'current', 'progress', 'duration' ],\n\t\t\t\tpluginPath: settings.pluginPath,\n\t\t\t\tstretching: 'responsive',\n\t\t\t\tsuccess: ( mediaElement, domObject, t ) => {\n\t\t\t\t\tconst $fakeBody = $( t.container ).parent();\n\n\t\t\t\t\t// Remove the fake <body> tag.\n\t\t\t\t\tif ( $.nodeName( $fakeBody.get( 0 ), 'body' ) ) {\n\t\t\t\t\t\t$fakeBody.replaceWith( $fakeBody.get( 0 ).childNodes );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: el => {\n\t\t\t\t\tconst $el = $( el );\n\t\t\t\t\tconst $parent = $el.closest( '.cue-track' );\n\t\t\t\t\tconst playerId = $el.closest( '.mejs-audio' ).attr( 'id' );\n\n\t\t\t\t\t// Remove the audio element if there is an error.\n\t\t\t\t\tmejs.players[ playerId ].remove();\n\t\t\t\t\t$parent.find( 'audio' ).remove();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Hack to allow .m4a files.\n\t\t\t// @link https://github.com/johndyer/mediaelement/issues/291\n\t\t\tif ( 'm4a' === $mediaEl.attr( 'src' ).split( '.' ).pop() ) {\n\t\t\t\tplayerSettings.pluginVars = 'isvideo=true';\n\t\t\t}\n\n\t\t\t$mediaEl.mediaelementplayer( playerSettings );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\trefresh: function( e ) {\n\t\tconst track = this.model.toJSON();\n\t\tconst playerId = this.$el.find( '.mejs-audio' ).attr( 'id' );\n\t\tconst player = playerId ? mejs.players[ playerId ] : null;\n\n\t\tif ( player && '' !== track.audioUrl ) {\n\t\t\tplayer.pause();\n\t\t\tplayer.setSrc( track.audioUrl );\n\t\t} else {\n\t\t\tthis.render();\n\t\t}\n\t},\n\n\tcleanup: function() {\n\t\tconst playerId = this.$el.find( '.mejs-audio' ).attr( 'id' );\n\t\tconst player = playerId ? mejs.players[ playerId ] : null;\n\n\t\tif ( player ) {\n\t\t\tplayer.remove();\n\t\t}\n\t},\n\n\tselect: function() {\n\t\tworkflows.setModel( this.model ).get( 'selectAudio' ).open();\n\t}\n});\n","import $ from 'jquery';\nimport wp from 'wp';\n\nimport { TrackArtwork } from './artwork';\nimport { TrackAudio } from './audio';\n\nexport const Track = wp.Backbone.View.extend({\n\ttagName: 'li',\n\tclassName: 'cue-track',\n\ttemplate: wp.template( 'cue-playlist-track' ),\n\n\tevents: {\n\t\t'change [data-setting]': 'updateAttribute',\n\t\t'click .js-toggle': 'toggleOpenStatus',\n\t\t'dblclick .cue-track-title': 'toggleOpenStatus',\n\t\t'click .js-close': 'minimize',\n\t\t'click .js-remove': 'destroy'\n\t},\n\n\tinitialize: function() {\n\t\tthis.listenTo( this.model, 'change:title', this.updateTitle );\n\t\tthis.listenTo( this.model, 'change', this.updateFields );\n\t\tthis.listenTo( this.model, 'destroy', this.remove );\n\t},\n\n\trender: function() {\n\t\tthis.$el.html( this.template( this.model.toJSON() ) ).data( 'cid', this.model.cid );\n\n\t\tthis.views.add( '.cue-track-column-artwork', new TrackArtwork({\n\t\t\tmodel: this.model,\n\t\t\tparent: this\n\t\t}));\n\n\t\tthis.views.add( '.cue-track-audio-group', new TrackAudio({\n\t\t\tmodel: this.model,\n\t\t\tparent: this\n\t\t}));\n\n\t\treturn this;\n\t},\n\n\tminimize: function( e ) {\n\t\te.preventDefault();\n\t\tthis.$el.removeClass( 'is-open' ).find( 'input:focus' ).blur();\n\t},\n\n\ttoggleOpenStatus: function( e ) {\n\t\te.preventDefault();\n\t\tthis.$el.toggleClass( 'is-open' ).find( 'input:focus' ).blur();\n\n\t\t// Trigger a resize so the media element will fill the container.\n\t\tif ( this.$el.hasClass( 'is-open' ) ) {\n\t\t\t$( window ).trigger( 'resize' );\n\t\t}\n\t},\n\n\t/**\n\t * Update a model attribute when a field is changed.\n\t *\n\t * Fields with a 'data-setting=\"{{key}}\"' attribute whose value\n\t * corresponds to a model attribute will be automatically synced.\n\t *\n\t * @param {Object} e Event object.\n\t */\n\tupdateAttribute: function( e ) {\n\t\tconst attribute = $( e.target ).data( 'setting' );\n\t\tconst value = e.target.value;\n\n\t\tif ( this.model.get( attribute ) !== value ) {\n\t\t\tthis.model.set( attribute, value );\n\t\t}\n\t},\n\n\t/**\n\t * Update a setting field when a model's attribute is changed.\n\t */\n\tupdateFields: function() {\n\t\tconst track = this.model.toJSON();\n\t\tconst $settings = this.$el.find( '[data-setting]' );\n\n\t\t// A change event shouldn't be triggered here, so it won't cause\n\t\t// the model attribute to be updated and get stuck in an\n\t\t// infinite loop.\n\t\tfor ( const attribute in track ) {\n\t\t\tconst value = $( '<div/>' ).html( track[ attribute ] ).text(); // Decodes HTML entities.\n\t\t\t$settings.filter( '[data-setting=\"' + attribute + '\"]' ).val( value );\n\t\t}\n\t},\n\n\tupdateTitle: function() {\n\t\tconst title = this.model.get( 'title' );\n\t\tthis.$el.find( '.cue-track-title .text' ).text( title ? title : 'Title' );\n\t},\n\n\t/**\n\t * Destroy the view's model.\n\t *\n\t * Avoid syncing to the server by triggering an event instead of\n\t * calling destroy() directly on the model.\n\t */\n\tdestroy: function() {\n\t\tthis.model.trigger( 'destroy', this.model );\n\t},\n\n\tremove: function() {\n\t\tthis.$el.remove();\n\t}\n});\n","import wp from 'wp';\n\nimport { l10n } from 'cue';\n\nconst { MediaFrame, Toolbar } = wp.media.view;\nconst { Post: PostFrame, Select: SelectFrame } = MediaFrame;\n\nexport const TrackMediaFrame = PostFrame.extend({\n\tcreateStates: function() {\n\t\tconst options = this.options;\n\n\t\tthis.states.add([\n\t\t\tnew wp.media.controller.Library({\n\t\t\t\tid: 'insert',\n\t\t\t\ttitle: options.title,\n\t\t\t\tpriority: 20,\n\t\t\t\ttoolbar: 'main-insert',\n\t\t\t\tfilterable: 'uploaded',\n\t\t\t\tlibrary: wp.media.query( options.library ),\n\t\t\t\tmultiple: options.multiple ? 'reset' : false,\n\t\t\t\teditable: false,\n\t\t\t\tallowLocalEdits: true,\n\t\t\t\tdisplaySettings: false,\n\t\t\t\tdisplayUserSettings: false\n\t\t\t}),\n\n\t\t\tnew wp.media.controller.Embed({\n\t\t\t\ttitle: l10n.addFromUrl,\n\t\t\t\tmenuItem: { text: l10n.addFromUrl, priority: 120 },\n\t\t\t\ttype: 'link'\n\t\t\t})\n\t\t]);\n\t},\n\n\tbindHandlers: function() {\n\t\tSelectFrame.prototype.bindHandlers.apply( this, arguments );\n\n\t\tthis.on( 'toolbar:create:main-insert', this.createToolbar, this );\n\t\tthis.on( 'toolbar:create:main-embed', this.mainEmbedToolbar, this );\n\n\t\tthis.on( 'menu:render:default', this.mainMenu, this );\n\n\t\tthis.on( 'content:render:embed', this.embedContent, this );\n\t\tthis.on( 'content:render:edit-selection', this.editSelectionContent, this );\n\n\t\tthis.on( 'toolbar:render:main-insert', this.mainInsertToolbar, this );\n\t},\n\n\tmainInsertToolbar: function( view ) {\n\t\tthis.selectionStatusToolbar( view );\n\n\t\tview.set( 'insert', {\n\t\t\tstyle: 'primary',\n\t\t\tpriority: 80,\n\t\t\ttext: this.options.button.text,\n\t\t\trequires: {\n\t\t\t\tselection: true\n\t\t\t},\n\t\t\tclick: () => {\n\t\t\t\tconst state = this.state();\n\t\t\t\tconst selection = state.get( 'selection' );\n\n\t\t\t\tthis.close();\n\t\t\t\tstate.trigger( 'insert', selection ).reset();\n\t\t\t}\n\t\t});\n\t},\n\n\tmainEmbedToolbar: function( toolbar ) {\n\t\ttoolbar.view = new Toolbar.Embed({\n\t\t\tcontroller: this,\n\t\t\ttext: this.options.button.text\n\t\t});\n\t}\n});\n","import $ from 'jquery';\nimport wp from 'wp';\n\nimport workflows from '../../../modules/workflows';\n\nexport const AddTracksButton = wp.Backbone.View.extend({\n\tid: 'add-tracks',\n\ttagName: 'p',\n\n\tevents: {\n\t\t'click .button': 'click'\n\t},\n\n\tinitialize: function( options ) {\n\t\tthis.l10n = options.l10n;\n\t},\n\n\trender: function() {\n\t\tconst $button = $( '<a />', {\n\t\t\ttext: this.l10n.addTracks\n\t\t}).addClass( 'button button-secondary' );\n\n\t\tthis.$el.html( $button );\n\n\t\treturn this;\n\t},\n\n\tclick: function( e ) {\n\t\te.preventDefault();\n\t\tworkflows.get( 'addTracks' ).open();\n\t}\n});\n","import $ from 'jquery';\nimport wp from 'wp';\n\nimport { AddTracksButton } from './button/add-tracks';\nimport { TrackList } from '../edit-playlist/track-list';\n\nexport const EditPlaylistScreen = wp.Backbone.View.extend({\n\tsaved: false,\n\n\tevents: {\n\t\t'click #publish': 'buttonClick',\n\t\t'click #save-post': 'buttonClick'\n\t},\n\n\tinitialize: function( options ) {\n\t\tthis.l10n = options.l10n;\n\t},\n\n\trender: function() {\n\t\tthis.views.add( '#cue-playlist-editor .cue-panel-body', [\n\t\t\tnew AddTracksButton({\n\t\t\t\tcollection: this.collection,\n\t\t\t\tl10n: this.l10n\n\t\t\t}),\n\t\t\tnew TrackList({\n\t\t\t\tcollection: this.collection\n\t\t\t})\n\t\t]);\n\n\t\treturn this;\n\t},\n\n\tbuttonClick: function( e ) {\n\t\tconst $button = $( e.target );\n\n\t\tif ( ! this.saved ) {\n\t\t\tthis.collection.save().done( data => {\n\t\t\t\tthis.saved = true;\n\t\t\t\t$button.click();\n\t\t\t});\n\t\t}\n\n\t\treturn this.saved;\n\t}\n});\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = Backbone;","module.exports = jQuery;","module.exports = mejs;","module.exports = _;","module.exports = wp;"],"sourceRoot":""}
